<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <link rel="icon" href="favicon.ico">
    <title>秘密コマンド認証</title>
    <style>
        /* --- 0. Root Variables & Global Reset (mmrc.vercel.appの定義を使用) --- */
        :root {
            --bg-color: #1a1a1a;
            --card-bg-color: #2a2a2a;
            --primary-color: #0d6efd; /* 青色を強調色として使用 */
            --text-color: #e0e0e0;
            --text-muted-color: #888;
            --border-color: #3a3a3a;
            --error-color: #ff3300;
            --success-color: #00ff00;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            /* 100vhに設定し、中央配置を維持 */
            height: 100vh; 
        }

        /* --- 1. Container Styling (SF要素を排除し、シンプル化) --- */
        .auth-container {
            /* mmrc.vercel.appの.cardスタイルをベースに適用 */
            background-color: var(--card-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 12px; 
            padding: 40px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
            transition: border-color 0.3s ease, transform 0.3s ease;
            max-width: 400px;
            width: 90%;
            z-index: 2;
            /* SF要素のアニメーション、チルト、ネオン効果を排除 */
        }

        .auth-container:hover {
            border-color: var(--primary-color); 
            transform: translateY(-2px);
        }

        h1 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 25px;
            font-weight: 800;
            /* SF風のテキストシャドウ、アニメーションを排除 */
        }

        /* --- 2. Input Styling (シンプルでモダンなダークテーマ) --- */
        #pwd {
            background-color: #3a3a3a; 
            border: 1px solid #555; 
            color: var(--text-color);
            font-family: inherit;
            font-size: 1em;
            padding: 10px;
            margin: 15px 0;
            width: 100%;
            text-align: center;
            outline: none;
            border-radius: 6px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        #pwd::placeholder {
            color: var(--text-muted-color);
        }

        #pwd:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(13, 110, 253, 0.25);
        }

        /* --- 3. Button Styling (mmrc.vercel.appの.buttonスタイルを適用) --- */
        button {
            display: block;
            width: 100%;
            padding: 0.75rem;
            margin-top: 15px;
            background-color: var(--primary-color);
            color: white;
            font-family: inherit;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            /* SF風のテキストシャドウ、ネオン、大文字化を排除 */
        }

        button:hover {
            background-color: #0c5bda;
            box-shadow: 0 4px 10px rgba(13, 110, 253, 0.4);
        }

        /* --- 4. Message Styling --- */
        #msg {
            margin-top: 20px;
            height: 20px;
            font-weight: 700;
            font-size: 0.9em;
            /* SF風のネオンシャドウを排除 */
        }

        #msg.success { color: var(--success-color); }
        #msg.error { color: var(--error-color); }
    </style>
    </head>
<body>
    <div class="auth-container">
        <h1>秘密コマンド</h1>
        <input id="pwd" type="password" placeholder="パスワードを入力">
        <button id="btn">実行</button>
        <p id="msg"></p>
    </div>

    <script>
        const DEBUG = false;

        (function () {
            // パスワードは元のコードから抽出 (atobでデコード)
            const ok1 = "manmaru3219"; 
            const ok2 = "mannmaru3219";

            if (DEBUG) {
                console.log("DEBUG: ok1=", ok1, " ok2=", ok2);
            }

            const input = document.getElementById("pwd");
            const btn = document.getElementById("btn");
            const msg = document.getElementById("msg");

            btn.addEventListener("click", checkAndRun);

            // Enter でも送れるようにする
            input.addEventListener("keydown", function(e){
                if (e.key === "Enter") checkAndRun();
            });

            function checkAndRun(){
                const val = input.value || "";
                if (val === ok1 || val === ok2) {
                    msg.classList.remove("error");
                    msg.classList.add("success");
                    msg.textContent = "✅ 成功！秘密モード起動！";
                    // sfx.success.play(); // サウンドエフェクト削除
                    localStorage.setItem('gokuhi_authenticated', 'true');
                    setTimeout(() => location.href = "gokuhi.html", 1000);
                } else {
                    msg.classList.remove("success");
                    msg.classList.add("error");
                    msg.textContent = "❌ パスワードが違います。";
                    // sfx.error.play(); // サウンドエフェクト削除
                }
            }
        })();
    </script>
</body>
</html>